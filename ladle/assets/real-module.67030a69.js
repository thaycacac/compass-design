import{r as o,R as p}from"./index.460c870b.js";import{d as h}from"./module.aa0ccdca.js";class m{getStringForLocale(e,t){let r=this.strings[t];r||(r=L(t,this.strings,this.defaultLocale),this.strings[t]=r);let n=r[e];if(!n)throw new Error(`Could not find intl message ${e} in ${t} locale`);return n}constructor(e,t="en-US"){this.strings={...e},this.defaultLocale=t}}function L(a,e,t="en-US"){if(e[a])return e[a];let r=x(a);if(e[r])return e[r];for(let n in e)if(n.startsWith(r+"-"))return e[n];return e[t]}function x(a){return Intl.Locale?new Intl.Locale(a).language:a.split("-")[0]}const u=new Map,s=new Map;class v{format(e,t){let r=this.strings.getStringForLocale(e,this.locale);return typeof r=="function"?r(t,this):r}plural(e,t,r="cardinal"){let n=t["="+e];if(n)return typeof n=="function"?n():n;let i=this.locale+":"+r,l=u.get(i);l||(l=new Intl.PluralRules(this.locale,{type:r}),u.set(i,l));let g=l.select(e);return n=t[g]||t.other,typeof n=="function"?n():n}number(e){let t=s.get(this.locale);return t||(t=new Intl.NumberFormat(this.locale),s.set(this.locale,t)),t.format(e)}select(e,t){let r=e[t]||e.other;return typeof r=="function"?r():r}constructor(e,t){this.locale=e,this.strings=t}}const S=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),w=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function y(a){if(Intl.Locale){let t=new Intl.Locale(a).maximize().script;return S.has(t)}let e=a.split("-")[0];return w.has(e)}function b(){let a=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([a])}catch{a="en-US"}return{locale:a,direction:y(a)?"rtl":"ltr"}}let f=b(),c=new Set;function $(){f=b();for(let a of c)a(f)}function R(){let a=h(),[e,t]=o.exports.useState(f);return o.exports.useEffect(()=>(c.size===0&&window.addEventListener("languagechange",$),c.add(t),()=>{c.delete(t),c.size===0&&window.removeEventListener("languagechange",$)}),[]),a?{locale:"en-US",direction:"ltr"}:e}const I=p.createContext(null);function C(){let a=R();return o.exports.useContext(I)||a}const d=new WeakMap;function F(a){let e=d.get(a);return e||(e=new m(a),d.set(a,e)),e}function T(a){let{locale:e}=C(),t=o.exports.useMemo(()=>F(a),[a]);return o.exports.useMemo(()=>new v(e,t),[e,t])}export{T as $};
